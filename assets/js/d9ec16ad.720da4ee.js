"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[2417],{3905:(n,e,t)=>{t.d(e,{Zo:()=>d,kt:()=>p});var a=t(7294);function r(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function s(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),t.push.apply(t,a)}return t}function i(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?s(Object(t),!0).forEach((function(e){r(n,e,t[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):s(Object(t)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))}))}return n}function o(n,e){if(null==n)return{};var t,a,r=function(n,e){if(null==n)return{};var t,a,r={},s=Object.keys(n);for(a=0;a<s.length;a++)t=s[a],e.indexOf(t)>=0||(r[t]=n[t]);return r}(n,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(a=0;a<s.length;a++)t=s[a],e.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(n,t)&&(r[t]=n[t])}return r}var c=a.createContext({}),l=function(n){var e=a.useContext(c),t=e;return n&&(t="function"==typeof n?n(e):i(i({},e),n)),t},d=function(n){var e=l(n.components);return a.createElement(c.Provider,{value:e},n.children)},h={inlineCode:"code",wrapper:function(n){var e=n.children;return a.createElement(a.Fragment,{},e)}},g=a.forwardRef((function(n,e){var t=n.components,r=n.mdxType,s=n.originalType,c=n.parentName,d=o(n,["components","mdxType","originalType","parentName"]),g=l(t),p=r,f=g["".concat(c,".").concat(p)]||g[p]||h[p]||s;return t?a.createElement(f,i(i({ref:e},d),{},{components:t})):a.createElement(f,i({ref:e},d))}));function p(n,e){var t=arguments,r=e&&e.mdxType;if("string"==typeof n||r){var s=t.length,i=new Array(s);i[0]=g;var o={};for(var c in e)hasOwnProperty.call(e,c)&&(o[c]=e[c]);o.originalType=n,o.mdxType="string"==typeof n?n:r,i[1]=o;for(var l=2;l<s;l++)i[l]=t[l];return a.createElement.apply(null,i)}return a.createElement.apply(null,t)}g.displayName="MDXCreateElement"},3822:(n,e,t)=>{t.r(e),t.d(e,{assets:()=>c,contentTitle:()=>i,default:()=>h,frontMatter:()=>s,metadata:()=>o,toc:()=>l});var a=t(7462),r=(t(7294),t(3905));const s={},i="\u5c0f\u7a0b\u5e8f\u751f\u6210\u56fe\u7247 canvas",o={unversionedId:"\u603b\u7ed3\u5f52\u7eb3/\u5c0f\u7a0b\u5e8f/\u5c0f\u7a0b\u5e8f\u751f\u6210\u56fe\u7247canvas",id:"\u603b\u7ed3\u5f52\u7eb3/\u5c0f\u7a0b\u5e8f/\u5c0f\u7a0b\u5e8f\u751f\u6210\u56fe\u7247canvas",title:"\u5c0f\u7a0b\u5e8f\u751f\u6210\u56fe\u7247 canvas",description:"\u65b0\u6587\u6863\u94fe\u63a5 \ud83d\udd17",source:"@site/docs/01-\u603b\u7ed3\u5f52\u7eb3/\u5c0f\u7a0b\u5e8f/\u5c0f\u7a0b\u5e8f\u751f\u6210\u56fe\u7247canvas.md",sourceDirName:"01-\u603b\u7ed3\u5f52\u7eb3/\u5c0f\u7a0b\u5e8f",slug:"/\u603b\u7ed3\u5f52\u7eb3/\u5c0f\u7a0b\u5e8f/\u5c0f\u7a0b\u5e8f\u751f\u6210\u56fe\u7247canvas",permalink:"/m/docs/\u603b\u7ed3\u5f52\u7eb3/\u5c0f\u7a0b\u5e8f/\u5c0f\u7a0b\u5e8f\u751f\u6210\u56fe\u7247canvas",draft:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/01-\u603b\u7ed3\u5f52\u7eb3/\u5c0f\u7a0b\u5e8f/\u5c0f\u7a0b\u5e8f\u751f\u6210\u56fe\u7247canvas.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"\u5c0f\u7a0b\u5e8f",permalink:"/m/docs/\u603b\u7ed3\u5f52\u7eb3/\u5c0f\u7a0b\u5e8f/"},next:{title:"\u5e38\u7528\u65b9\u6cd5",permalink:"/m/docs/\u603b\u7ed3\u5f52\u7eb3/\u5e38\u7528\u65b9\u6cd5"}},c={},l=[],d={toc:l};function h(n){let{components:e,...t}=n;return(0,r.kt)("wrapper",(0,a.Z)({},d,t,{components:e,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"\u5c0f\u7a0b\u5e8f\u751f\u6210\u56fe\u7247-canvas"},"\u5c0f\u7a0b\u5e8f\u751f\u6210\u56fe\u7247 canvas"),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://developers.weixin.qq.com/miniprogram/dev/framework/ability/canvas.html"},"\u65b0\u6587\u6863\u94fe\u63a5 \ud83d\udd17")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},'// pages/partner/index.js\nimport req from "../../libs/Request.js";\nimport Wx from "../../libs/Wx.js";\nimport api from "../../libs/api.js";\n\nlet app = getApp();\n\nPage({\n  /**\n   * \u9875\u9762\u7684\u521d\u59cb\u6570\u636e\n   */\n  data: {\n    imgUrls: [],\n    page: 0, //\u8bf7\u6c42\u9875\u6570\n\n    currentIndex: 0,\n    cardRightIn: false,\n    cardLeftIn: false,\n\n    tipOnoff: true,\n    isMove: false, //\u662f\u5426\u6ed1\u52a8\u4e2d\n    nickName: "", // \u6635\u79f0\n\n    maskHidden: false,\n    modalVisible: false,\n    right: "",\n  },\n\n  // \u83b7\u53d6\u56fe\u7247\u5361\n  getCards() {\n    let { page } = this.data;\n    let pg = page;\n    pg++;\n    return api\n      .getCards(pg)\n      .then((data) => {\n        let oldImgUrls = this.data.imgUrls;\n        this.setData({\n          imgUrls: (oldImgUrls || []).concat(data),\n          page: data.length ? pg : page,\n        });\n      })\n      .then(() => {\n        this.zanSync();\n      });\n  },\n  getUserInfo(e) {\n    let { backage, content, name } = e.currentTarget.dataset.item;\n    if (!e.detail.userInfo) {\n      this.setData({\n        modalVisible: true,\n        right: "userInfo",\n      });\n      return;\n    }\n    let { avatarUrl, nickName } = e.detail.userInfo;\n\n    // \u5982\u679c\u5df2\u7ecf\u751f\u6210\u4e86\uff0c\u90a3\u4e48\u5c31\u663e\u793a\n    if (this.SHARE_IMG) {\n      // return wx.previewImage({\n      //   urls: [this.SHARE_IMG],\n      // })\n      this.setData({\n        maskHidden: true,\n      });\n      return;\n    }\n    this.setData({\n      nickName,\n      prevImage: backage,\n      content,\n      name,\n    });\n    wx.showLoading({\n      title: "\u52aa\u529b\u751f\u6210\u4e2d...",\n      mask: true,\n    });\n    console.log(avatarUrl);\n    this.shareHandle(avatarUrl, backage);\n  },\n  // \u5f39\u6846\u786e\u8ba4\n  modalOk() {\n    let self = this;\n    wx.openSetting({\n      success(res) {\n        let { right } = self.data;\n        if (res.authSetting[`scope.${right}`]) {\n          wx.showToast({\n            title: "\u6388\u6743\u6210\u529f",\n            icon: "none",\n          });\n          self.modalCancel();\n        } else {\n          wx.showToast({\n            title: "\u672a\u6388\u6743",\n            icon: "none",\n          });\n        }\n      },\n    });\n  },\n  // \u5f39\u6846\u53d6\u6d88\n  modalCancel() {\n    this.setData({\n      modalVisible: false,\n    });\n  },\n  shareHandle(avatarUrl, backage) {\n    let promise1 = new Promise(function (resolve, reject) {\n      wx.getImageInfo({\n        src: avatarUrl,\n        success: function (res) {\n          console.log(res);\n          resolve(res);\n        },\n      });\n    });\n    let promise2 = new Promise(function (resolve, reject) {\n      wx.getImageInfo({\n        src: backage,\n        success: function (res) {\n          console.log(res);\n          resolve(res);\n        },\n      });\n    });\n    Promise.all([promise1, promise2]).then((res) => {\n      const ctx = wx.createCanvasContext("shareImg");\n\n      const grd = ctx.createCircularGradient(80, 557, 667);\n      grd.addColorStop(0, "#000");\n      grd.addColorStop(1, "#fff");\n\n      // ctx.setFillStyle(grd)\n      ctx.fillRect(0, 0, 375, 667);\n\n      new Promise((RES) => {\n        ctx.drawImage(\n          res[1].path,\n          0,\n          0,\n          375,\n          (375 * res[1].height) / res[1].width\n        );\n        console.log((375 * res[1].width) / res[1].height);\n        RES();\n      })\n        .then(\n          () =>\n            new Promise((RES) => {\n              this.canvasDraw(ctx, res);\n              ctx.draw(false, RES());\n            })\n        )\n        .then(() => {\n          wx.showLoading({\n            title: "\u518d\u7ed9\u6211\u4e00\u79d2\u949f...",\n            mask: true,\n          });\n          setTimeout(() => this.toCanvas(), 1000);\n        });\n    });\n  },\n  // \u753b\u5e03canvas\u7ed8\u5236\n  toCanvas() {\n    let self = this;\n    wx.canvasToTempFilePath({\n      x: 0,\n      y: 0,\n      width: 375,\n      height: 667,\n      canvasId: "shareImg",\n      success: function (res) {\n        self.SHARE_IMG = res.tempFilePath;\n        var urls = [res.tempFilePath];\n        self.setData({\n          imagePath: res.tempFilePath,\n          maskHidden: true,\n        });\n        // wx.previewImage({\n        //   urls\n        // });\n        wx.hideLoading();\n      },\n      fail: function (res) {\n        console.log(res);\n      },\n    });\n  },\n  // \u70b9\u8d5e\n  clickZan(e) {\n    console.log("\u8d5e");\n    let { idx, id, zan } = e.currentTarget.dataset,\n      { imgUrls } = this.data;\n    imgUrls.forEach((item, index) => {\n      if (idx === index) {\n        item.zan = !item.zan;\n        let zanIds = wx.getStorageSync("zaned") || [];\n        if (!zan) {\n          zanIds.push(id);\n        } else {\n          zanIds = zanIds.filter((item) => item !== id);\n        }\n        wx.setStorageSync("zaned", zanIds);\n      }\n    });\n\n    this.setData({\n      imgUrls,\n    });\n  },\n  // \u540c\u6b65\u70b9\u8d5e\n  zanSync() {\n    let zanIds = wx.getStorageSync("zaned") || [],\n      { currentIndex, imgUrls } = this.data,\n      id = imgUrls[currentIndex].id;\n\n    imgUrls.forEach((img) => {\n      if (zanIds.some((item) => item == img.id)) {\n        img.zan = true;\n      }\n    });\n    this.setData({\n      imgUrls,\n    });\n    console.log(currentIndex, id);\n  },\n\n  /**\n   * \u751f\u547d\u5468\u671f\u51fd\u6570--\u76d1\u542c\u9875\u9762\u52a0\u8f7d\n   */\n  onLoad: function (options) {\n    let tipOnoff = wx.getStorageSync("tipOnoff");\n    if (tipOnoff === false) this.setData({ tipOnoff });\n    //this.shareHandle()\n    this.getCards();\n  },\n  /**\n   * \u751f\u547d\u5468\u671f\u51fd\u6570--\u76d1\u542c\u9875\u9762\u663e\u793a\n   */\n  onShow: function () {},\n\n  //\u624b\u6307\u89e6\u6478\u52a8\u4f5c\u5f00\u59cb \u8bb0\u5f55\u8d77\u70b9X\u5750\u6807\n  touchstart(e) {\n    if (!e.changedTouches[0]) return;\n    this.setData({\n      startX: e.changedTouches[0].clientX,\n      startY: e.changedTouches[0].clientY,\n      isMove: false,\n    });\n  },\n  //\u6ed1\u52a8\u4e8b\u4ef6\u5904\u7406\n  touchmove: function (e) {\n    let { isMove } = this.data;\n\n    let idx = e.currentTarget.dataset.index;\n\n    let startX = this.data.startX, //\u5f00\u59cbX\u5750\u6807\n      startY = this.data.startY, //\u5f00\u59cbY\u5750\u6807\n      touchMoveX = e.changedTouches[0].clientX, //\u6ed1\u52a8\u53d8\u5316\u5750\u6807\n      touchMoveY = e.changedTouches[0].clientY, //\u6ed1\u52a8\u53d8\u5316\u5750\u6807\n      //\u83b7\u53d6\u6ed1\u52a8\u89d2\u5ea6\n      angle = this.angle(\n        { X: startX, Y: startY },\n        { X: touchMoveX, Y: touchMoveY }\n      );\n\n    //\u6ed1\u52a8\u8d85\u8fc745\u5ea6\u89d2 return\n    if (Math.abs(angle) < 45) return;\n\n    if (touchMoveY > startY) {\n      //\u4e0b\u6ed1\n      if (idx == 0) {\n        wx.showToast({\n          title: "\u5df2\u7ecf\u5230\u9876\u4e86",\n          icon: "none",\n        });\n        return;\n      }\n      this.setData({\n        currentIndex: idx == 0 ? 0 : idx - 1,\n        cardRightIn: false,\n        cardLeftIn: true,\n      });\n    } else {\n      if (idx == this.data.imgUrls.length - 1) {\n        wx.showToast({\n          title: "\u5df2\u7ecf\u5230\u5e95\u4e86",\n          icon: "none",\n        });\n        return;\n      }\n      this.setData({\n        currentIndex: idx == this.data.imgUrls.length - 1 ? idx : idx + 1,\n        cardRightIn: true,\n        cardLeftIn: false,\n      });\n\n      let { currentIndex, imgUrls } = this.data;\n      let imgLen = imgUrls.length;\n      if (currentIndex + 1 === imgLen && !isMove) {\n        if (!isMove) {\n          this.setData({\n            isMove: true,\n          });\n        }\n        console.log("\u8bf7\u6c42", currentIndex);\n        this.getCards();\n      }\n    }\n    this.SHARE_IMG = null;\n    // wx.pageScrollTo({\n    //   scrollTop: 0\n    // })\n  },\n  /**\n   * \u8ba1\u7b97\u6ed1\u52a8\u89d2\u5ea6\n   * @param {Object} start \u8d77\u70b9\u5750\u6807\n   * @param {Object} end \u7ec8\u70b9\u5750\u6807\n   */\n  angle: function (start, end) {\n    var _X = end.X - start.X,\n      _Y = end.Y - start.Y;\n    //\u8fd4\u56de\u89d2\u5ea6 /Math.atan()\u8fd4\u56de\u6570\u5b57\u7684\u53cd\u6b63\u5207\u503c\n    return (360 * Math.atan(_Y / _X)) / (2 * Math.PI);\n  },\n\n  // \u5173\u95ed\u63d0\u793a\u6846\n  close() {\n    this.setData(\n      {\n        tipOnoff: false,\n      },\n      () => {\n        wx.setStorageSync("tipOnoff", false);\n      }\n    );\n  },\n  // \u5173\u95edmask\u8499\u5c42\n  closeMask() {\n    this.setData({\n      maskHidden: false,\n    });\n  },\n  //\u70b9\u51fb\u4fdd\u5b58\u5230\u76f8\u518c\n  baocun() {\n    var that = this;\n    wx.saveImageToPhotosAlbum({\n      filePath: that.data.imagePath,\n      success(res) {\n        wx.showModal({\n          content: "\u56fe\u7247\u5df2\u4fdd\u5b58\u5230\u76f8\u518c\uff0c\u8d76\u7d27\u6652\u4e00\u4e0b\u5427~",\n          showCancel: false,\n          confirmText: "\u597d\u7684",\n          success: function (res) {\n            if (res.confirm) {\n              console.log("\u7528\u6237\u70b9\u51fb\u786e\u5b9a");\n              /* \u8be5\u9690\u85cf\u7684\u9690\u85cf */\n              that.setData({\n                maskHidden: false,\n              });\n              return;\n            }\n          },\n        });\n      },\n      fail() {\n        that.judgeScope("writePhotosAlbum").then((scope) => {\n          if (!scope) {\n            that.setData({\n              modalVisible: true,\n              right: "writePhotosAlbum",\n            });\n          }\n        });\n      },\n    });\n  },\n  // \u5224\u65ad\u6388\u6743\n  judgeScope(scope) {\n    return new Promise((resolve, reject) => {\n      wx.getSetting({\n        success(res) {\n          console.log(res);\n          resolve(res.authSetting[`scope.${scope}`]);\n        },\n      });\n    });\n  },\n  // \u7ed8\u5236canvas\n  canvasDraw(ctx, res) {\n    let canvasW = 375,\n      canvasH = 667, // \u753b\u5e03\u5bbd\u9ad8\n      gapW = 10, // \u95f4\u9694\u5bbd\n      rightW = 120,\n      blockH = rightW,\n      leftW = canvasW - gapW * 3 - rightW, // \u5e95\u90e8\u5de6\u53f3\u6846\u7684\u5bbd\n      headR = 40, // \u5934\u50cf\u534a\u5f84\n      rectRadius = 10, // \u77e9\u5f62\u8fb9\u89d2\u534a\u5f84\n      linkH = 10, // \u4e2d\u95f4\u8fde\u63a5\u4ef6\u9ad8\n      headPad = 5, // \u5934\u50cfpadding\n      canvasTop = canvasH - gapW - blockH,\n      canvasBottom = canvasH - gapW;\n\n    let imgH = (375 * res[1].height) / res[1].width, // \u56fe\u7247\u7684\u9ad8\u5ea6\n      fontTop = (canvasTop - imgH - headR - 105) / 2 + imgH,\n      { content, name } = this.data,\n      fonts = content.slice(0, 48).split("");\n\n    // \u4e00\u884c\u591a\u5c11\u5b57\n    var NUMBER_OF_LINE = 20;\n    // \u6bcf\u4e2a\u5b57\u591a\u5bbd\n    var FONT_WIDTH = 16.5;\n    // 1. \u8fdb\u884c\u5206\u5272\uff0c\u83b7\u53d6\u524d\u4e09\u884c\n    var c_temps = content.split("\\r\\n");\n    var line_counts = 0;\n    // \u5982\u679c\u8d85\u8fc7\u4e09\u884c\uff0c\u90a3\u4e48\u53ea\u53d6\u524d\u4e09\u884c\n    if (c_temps.length > 3) {\n      c_temps = c_temps.slice(0, 3);\n    }\n\n    for (var i in c_temps) {\n      var c_data = c_temps[i];\n      // \u8ba1\u7b97\u8981\u6362\u591a\u5c11\u884c\n      var c_lines = parseInt(c_data.length / NUMBER_OF_LINE) + 1;\n      for (var j = 0; j < c_lines; j++) {\n        startDraw(\n          c_data.slice(j * NUMBER_OF_LINE, (j + 1) * NUMBER_OF_LINE),\n          line_counts\n        );\n        line_counts++;\n      }\n    }\n\n    // \u5f00\u59cb\u7ed8\u5236\u6587\u5b57\n    // text\u7ed8\u5236\u7684\u6587\u5b57\uff0cline\u5728\u7b2c\u51e0\u884c\n    function startDraw(text, line) {\n      // \u5982\u679cline > 3\uff0c\u5219\u5ffd\u7565\n      // \u56e0\u4e3aline\u4ece0\u5f00\u59cb\n      // \u5982\u679c\u6700\u540e\u4e00\u884c\uff0c\u5e76\u4e14\u6587\u5b57\u8fd8\u662f\u90a3\u4e48\u591a\uff0c\u90a3\u4e48\u5c31\u7701\u7565\u53f7\u4ee3\u66ff\n      if (line === 2 && text.length === NUMBER_OF_LINE) {\n        text = text.slice(0, 13) + "..";\n      } else if (line > 2) {\n        return;\n      }\n      var y = fontTop + line * 35; // 200\u4e3a\u6587\u5b57\u521d\u59cby\u5750\u6807\n      console.log("[draw]", text, y);\n      ctx.setFontSize(FONT_WIDTH - 2);\n      ctx.setTextAlign("left");\n      ctx.setTextBaseline("top");\n      ctx.setFillStyle("#fff");\n      for (var i in text) {\n        var t = text[i];\n        // \u5f00\u59cb\u7ed8\u5236\n        ctx.fillText(\n          t,\n          (375 - FONT_WIDTH * NUMBER_OF_LINE) / 2 + i * FONT_WIDTH,\n          y\n        );\n      }\n    }\n    ctx.setTextAlign("right");\n    ctx.fillText(\n      "\u2014\u2014 " + name,\n      (375 + FONT_WIDTH * NUMBER_OF_LINE) / 2,\n      fontTop + 105\n    );\n\n    this.roundRect(ctx, gapW, canvasTop, leftW, blockH, rectRadius);\n    this.roundRect(\n      ctx,\n      gapW * 2 + leftW,\n      canvasTop,\n      rightW,\n      blockH,\n      rectRadius\n    );\n    this.roundRect(\n      ctx,\n      gapW / 2 + leftW,\n      canvasTop + (blockH - 2 * linkH) / 3,\n      linkH * 2,\n      linkH,\n      0\n    );\n    this.roundRect(\n      ctx,\n      gapW / 2 + leftW,\n      canvasTop + ((blockH - 2 * linkH) * 2) / 3 + linkH,\n      linkH * 2,\n      linkH,\n      0\n    );\n\n    this.roundRect(\n      ctx,\n      gapW * 3 - headPad,\n      canvasTop - headR - headPad,\n      (headR + headPad) * 2,\n      (headR + headPad) * 2,\n      headR + headPad\n    );\n\n    ctx.save();\n    ctx.beginPath();\n    ctx.arc(gapW * 3 + headR, canvasTop, headR, 0, 2 * Math.PI);\n    ctx.fill("#fff");\n    ctx.clip();\n    ctx.drawImage(\n      res[0].path,\n      gapW * 3,\n      canvasTop - headR,\n      2 * headR,\n      2 * headR\n    );\n    ctx.restore();\n\n    // \u753b\u7ebf\u6bb5\n    ctx.beginPath();\n    ctx.setStrokeStyle("#000");\n    ctx.moveTo(gapW * 3 + headR * 2, canvasTop + 25);\n    ctx.lineTo(gapW + leftW - gapW, canvasTop + 25);\n\n    ctx.moveTo(gapW * 2, canvasBottom - 25);\n    ctx.lineTo(gapW + leftW - gapW, canvasBottom - 25);\n    ctx.stroke();\n\n    ctx.setFillStyle("#000");\n    ctx.setFontSize(15);\n    ctx.setTextAlign("center");\n    ctx.setTextBaseline("bottom");\n    ctx.fillText(\n      "\u5065 / \u5eb7 / \u751f / \u6d3b / \u6bcf / \u4e00 / \u5929",\n      gapW + leftW / 2,\n      canvasBottom - 3,\n      leftW\n    );\n\n    ctx.setTextAlign("left");\n    ctx.fillText(this.data.nickName, gapW * 4 + headR * 2, canvasTop + 25);\n\n    ctx.setTextAlign("center");\n    ctx.setTextBaseline("middle");\n    ctx.setFontSize(20);\n    ctx.fillText(\n      "\u6211\u662f\u7b2c100\u4f4d\u5065\u5eb7\u8fbe\u4eba",\n      gapW + leftW / 2,\n      (canvasBottom + canvasTop) / 2,\n      leftW\n    );\n  },\n  // \u7ed8\u5236\u5706\u89d2\u77e9\u5f62\n  roundRect(ctx, x, y, w, h, r) {\n    // \u5f00\u59cb\u7ed8\u5236\n    ctx.beginPath();\n    // \u56e0\u4e3a\u8fb9\u7f18\u63cf\u8fb9\u5b58\u5728\u952f\u9f7f\uff0c\u6700\u597d\u6307\u5b9a\u4f7f\u7528 transparent \u586b\u5145\n    ctx.setFillStyle("#fff");\n    // ctx.setStrokeStyle(\'transparent\')\n    // \u7ed8\u5236\u5de6\u4e0a\u89d2\u5706\u5f27\n    ctx.arc(x + r, y + r, r, Math.PI, Math.PI * 1.5);\n\n    // \u7ed8\u5236border-top\n    ctx.moveTo(x + r, y);\n    ctx.lineTo(x + w - r, y);\n    ctx.lineTo(x + w, y + r);\n    // \u7ed8\u5236\u53f3\u4e0a\u89d2\u5706\u5f27\n    ctx.arc(x + w - r, y + r, r, Math.PI * 1.5, Math.PI * 2);\n\n    // \u7ed8\u5236border-right\n    ctx.lineTo(x + w, y + h - r);\n    ctx.lineTo(x + w - r, y + h);\n    // \u7ed8\u5236\u53f3\u4e0b\u89d2\u5706\u5f27\n    ctx.arc(x + w - r, y + h - r, r, 0, Math.PI * 0.5);\n\n    // \u7ed8\u5236border-bottom\n    ctx.lineTo(x + r, y + h);\n    ctx.lineTo(x, y + h - r);\n    // \u7ed8\u5236\u5de6\u4e0b\u89d2\u5706\u5f27\n    ctx.arc(x + r, y + h - r, r, Math.PI * 0.5, Math.PI);\n\n    // \u7ed8\u5236border-left\n    ctx.lineTo(x, y + r);\n    ctx.lineTo(x + r, y);\n\n    ctx.fill();\n    ctx.closePath();\n    // \u526a\u5207\n    // ctx.clip()\n  },\n\n  /**\n   * \u9875\u9762\u4e0a\u62c9\u89e6\u5e95\u4e8b\u4ef6\u7684\u5904\u7406\u51fd\u6570\n   */\n  onReachBottom: function () {},\n  /**\n   * \u751f\u547d\u5468\u671f\u51fd\u6570--\u76d1\u542c\u9875\u9762\u521d\u6b21\u6e32\u67d3\u5b8c\u6210\n   */\n  onReady: function () {},\n\n  /**\n   * \u751f\u547d\u5468\u671f\u51fd\u6570--\u76d1\u542c\u9875\u9762\u9690\u85cf\n   */\n  onHide: function () {},\n\n  /**\n   * \u751f\u547d\u5468\u671f\u51fd\u6570--\u76d1\u542c\u9875\u9762\u5378\u8f7d\n   */\n  onUnload: function () {},\n\n  /**\n   * \u9875\u9762\u76f8\u5173\u4e8b\u4ef6\u5904\u7406\u51fd\u6570--\u76d1\u542c\u7528\u6237\u4e0b\u62c9\u52a8\u4f5c\n   */\n  onPullDownRefresh: function () {},\n\n  /**\n   * \u7528\u6237\u70b9\u51fb\u53f3\u4e0a\u89d2\u5206\u4eab\n   */\n  onShareAppMessage: function () {\n    let { currentIndex, imgUrls } = this.data;\n\n    return {\n      title: "",\n      path: "pages/home/index",\n      imageUrl: imgUrls[currentIndex].backage,\n    };\n  },\n});\n')))}h.isMDXComponent=!0}}]);