---
slug: /
---

# docusaurus ç›¸å…³é…ç½®

:::info
è¯¦æƒ…å¯å‚ç…§ [å®˜ç½‘](https://docusaurus.io/)
:::

## å°†æ–‡æ¡£æŸä¸€æ–‡ä»¶è®¾ä¸ºæ–‡æ¡£é¦–é¡µ

åªéœ€å°†å¦‚ä¸‹å†…å®¹æ·»åŠ åˆ°æ–‡æ¡£å¤´éƒ¨å³å¯ï¼Œdocs æ–‡æ¡£ä¸‹åªèƒ½æœ‰ä¸€ä¸ªè¿™æ ·çš„æ–‡ä»¶ï¼Œå¦åˆ™ä¼šè¦†ç›–

```md title="é…ç½®å¤´éƒ¨å±•ç¤ºä¸º host/docs é¦–é¡µ"
---
slug: /
---
```

## å°†æ–‡æ¡£æŸä¸€æ–‡ä»¶è®¾ä¸ºç½‘ç«™é¦–é¡µå±•ç¤º

> **åˆ† 3 æ­¥**

1. ä¿®æ”¹ `docusaurus.config.js` ä¸­ presets-docs å¯¹è±¡ï¼Œ æ·»åŠ  `routeBasePath: "/"`ã€‚æ­¤æ—¶å¹¶ä¸ä¼šç”Ÿæ•ˆ
2. docs ä¸­æ‰¾åˆ°éœ€è¦é¦–é¡µå±•ç¤ºçš„ md æ–‡æ¡£ï¼Œç„¶åæ–‡æ¡£å¤´éƒ¨æ·»åŠ ä¸‹é¢çš„æ ¼å¼

```md title="é…ç½®å¤´éƒ¨å±•ç¤ºä¸ºé¦–é¡µ"
---
slug: /
---
```

3. å°† src-pages ä¸‹çš„ index.js é‡å‘½åï¼Œå› ä¸ºé»˜è®¤é¦–é¡µæ—¶å€™è¯¥ç›®å½•ä¸‹çš„ index.js

ç»è¿‡ä»¥ä¸Šé…ç½®åï¼Œé¦–é¡µå°±ä¼šå±•ç¤ºä¸ºé…ç½®çš„ docs çš„æ–‡æ¡£äº†

## æ›´æ”¹æ–‡æ¡£è®¿é—®é“¾æ¥ä¸­çš„ url

æ–‡æ¡£çš„ url è·¯å¾„é»˜è®¤æ˜¯å®ƒç›¸å¯¹äº docs æ–‡ä»¶å¤¹çš„è·¯å¾„ï¼Œå¦‚ docs --> greeting.md æ–‡ä»¶ï¼Œåˆ™è¯¥æ–‡ä»¶çš„è®¿é—®è·¯å¾„æ˜¯ `host/docs/greeting`
å¦‚ä½•æ›´æ”¹å‘¢ï¼šå°±éœ€è¦ç”¨åˆ° slug é…ç½®
åœ¨æ–‡æ¡£çš„å¤´éƒ¨æ·»åŠ å¦‚ä¸‹å†…å®¹ï¼Œåˆ™è¯¥æ–‡æ¡£çš„è®¿é—® url å°±ä¼šä» `docs/æ–‡ä»¶å` æ›´æ”¹ä¸º `docs/config`

```js title="é…ç½®å¤´éƒ¨å±•ç¤ºä¸ºé¦–é¡µ"
---
slug: /config
---
```

## ä¾§è¾¹æ 

### é…ç½®å¯éšè—çš„ä¾§è¾¹æ 

```javascript title="docusaurus.config.js"
module.exports = {
  themeConfig: {
    docs: {
      sidebar: {
        hideable: true,
        autoCollapseCategories: true,
      },
    },
  },
};
```

é…ç½®ä¹‹åä¾§è¾¹æ çš„ä¸‹æ–¹ä¼šæœ‰å¯æ”¶ç¼©æ ‡è¯†

### ä¾§è¾¹æ å±•å¼€éšè—åŒçº§èœå•

```js title="docusaurus.config.js"
module.exports = {
  themeConfig: {
    docs: {
      sidebar: {
        autoCollapseCategories: true,
      },
    },
  },
};
```

é…ç½®ä¹‹åï¼Œå±•å¼€ä¸€ä¸ªèœå•ï¼Œå±•å¼€å¦ä¸€ä¸ªèœå•æ—¶ï¼Œç¬¬ä¸€ä¸ªèœå•å°±ä¼šæ”¶èµ·ã€‚

### ä¾§è¾¹æ é¢åŒ…å±‘å¯¼èˆªéšè—

```js title="docusaurus.config.js"
module.exports = {
  presets: [
    [
      {
        docs: {
          breadcrumbs: false,
        },
      },
    ],
  ],
};
```

é…ç½®ä¹‹åï¼Œå†…å®¹åŒºå¤´éƒ¨çš„é¢åŒ…å±‘å°±ä¼šéšè—

### ä¾§è¾¹å¤šçº§èœå•ç‚¹å‡»æ˜¾ç¤ºå­èœå•å¡ç‰‡åˆ—è¡¨

è¯´ä¸æ˜ç™½ï¼Œç›´æ¥ä¸Šæ•ˆæœå›¾
![](./imgs/sidebar-category.png)

ä»¥ä¸Šæ•ˆæœå¾ˆç®€å•ï¼Œå‰ææ˜¯æ€»ç»“ç±»ç›®ä¸‹æœ‰å­èœå•ï¼Œåªéœ€è¦ç»™ `docs/æ€»ç»“ç±»ç›®`ä¸‹æ–°å»º `_category_.json`æ–‡ä»¶ï¼Œæ·»åŠ ä»¥ä¸‹ä¿¡æ¯ï¼Œå°±ä¼šè‡ªåŠ¨ç”Ÿæˆ

```json title="docs/æ€»ç»“ç±»ç›®/_category_.json"
{
  "label": "æ€»ç»“ç±»ç›®", // èœå•æ˜¾ç¤ºçš„åç§°
  "position": -1, // ä¾§è¾¹æ˜¾ç¤ºçš„é¡ºåº
  "link": {
    "type": "generated-index",
    "title": "èœå•å¦‚ä¸‹" // æ˜¾ç¤ºçš„å¡ç‰‡åˆ—è¡¨çš„å¤§æ ‡é¢˜
  }
}
```

### ä¾§è¾¹èœå•å­é€‰é¡¹æ˜¾ç¤ºé¡ºåº

å¦‚ä½•é…ç½®èœå•ä¸‹æ–¹çš„å†…å®¹æ˜¾ç¤ºé¡ºåºå‘¢

![](./imgs/child-menu-sort.png)

- æ–¹æ³• 1
  åƒä¸Šé¢ç»™æ¯ä¸ªèœå•ä¸‹é…ç½® `_category_.json` çš„æ–¹å¼ï¼Œé€šè¿‡æ·»åŠ  position å€¼ï¼Œå¯ä»¥è¿›è¡Œé…ç½®é¡ºåº

- æ–¹æ³• 2
  å¯ä»¥åœ¨å­èœå•çš„ md æ–‡ä»¶å¤´éƒ¨æ·»åŠ å¦‚ä¸‹å†…å®¹

```md
---
sidebar_position: 1
# sidebar_label: ç®€å•
---
```

- æ–¹æ³• 3
  ç›´æ¥åœ¨å­èœå•çš„æ–‡ä»¶å¤¹ä¸Šæ·»åŠ `00`ã€`01`è¿™æ ·çš„é¡ºåºï¼Œä¼šè¢«è‡ªåŠ¨æ’åºï¼Œæ¯”è¾ƒæ¨èè¿™ç§ï¼Œåº”è¯¥ä¼˜å…ˆçº§æ¯”è¾ƒé«˜ç‚¹ï¼Œè¿˜æ–¹ä¾¿

**ä¼˜å…ˆçº§**ï¼š `_category_.json` > æ–‡ä»¶é¡ºåºå‘½å > md å¤´éƒ¨æ·»åŠ  sidebar_position

sidebar_position å°±æ˜¯ç”¨æ¥å®šä¹‰æ˜¾ç¤ºé¡ºåºçš„

### ä¾§è¾¹æ èœå•é…ç½®

ä¾§è¾¹æ èœå•é¡¹æœ‰ 4 é’Ÿæ ¼å¼

1. category å±‚æ¬¡èœå•
2. doc æ–‡æ¡£æ ¼å¼
3. link é“¾æ¥æ ¼å¼
4. html è‡ªå®šä¹‰æ ·å¼

#### category æ ¼å¼

```js title="sidebars.js"
module.exports = {
  docs: [
    {
      type: "category", // ç±»åˆ«æ˜¯å±‚çº§èœå•
      label: "Guides", // èœå•æ ‡é¢˜
      collapsible: true, // å¯å±•å¼€å…³é—­
      collapsed: false, // é»˜è®¤å…³é—­
      items: [
        "creating-pages", // ç¬¬ä¸€çº§èœå•
        {
          // åµŒå¥—äºŒçº§èœå•
          type: "category",
          label: "Docs",
          items: ["introduction", "sidebar", "markdown-features", "versioning"],
        },
      ],
    },
  ],
};
```

ä»¥ä¸Šä¼šç”Ÿæˆä¸€ä¸ªå¯æ‰“å¼€å…³é—­çš„èœå•ï¼Œé»˜è®¤æ˜¯å…³é—­çš„äºŒçº§èœå•ï¼Œå†™æ³•æ¯”è¾ƒç¹çï¼Œä¸‹é¢æ˜¯ç®€å†™å½¢å¼

```js
module.exports = {
  docs: {
    Guides: [
      "creating-pages",
      {
        Docs: ["introduction", "sidebar", "markdown-features", "versioning"],
      },
    ],
  },
};
```

è¯´æ˜ï¼šGuides æŒ‡å±‚çº§èœå•çš„æ ‡é¢˜ï¼Œæ•°ç»„ä¸­æ¯ä¸€é¡¹æ˜¯å­èœå•çš„æ–‡ä»¶ id(é»˜è®¤å¯¹åº”ç›®å½•çš„ä½ç½®ï¼Œå¦‚ï¼š`docs/coms/nav.md`, çš„æ–‡ä»¶ id æ˜¯ `coms/nav`)ï¼ŒåµŒå¥—çš„äºŒçº§å±‚çº§èœå•æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œkey æ˜¯äºŒçº§èœå•çš„ labelï¼Œvalue æ˜¯ å­èœå•çš„æ–‡ä»¶ id

## docusaurus.config.js é…ç½®ä¿¡æ¯

### headers é…ç½®ä¿¡æ¯

```js title="docusaurus.config.js"
module.exports = {
  themeConfig:
    /** @type {import('@docusaurus/preset-classic').ThemeConfig} */
    ({
      docs: {
        sidebar: {
          hideable: true,
          autoCollapseCategories: true,
        },
      },
      navbar: {
        title: "è±†è…çˆ±ä¸Šè„‘", // navbarçš„æ ‡é¢˜
        logo: {
          alt: "My Site Logo",
          src: "img/logo.svg", // navbarçš„å›¾æ ‡
        },
        items: [
          // navbarçš„é¡¹ç›®æ ‡é¢˜
          {
            type: "doc", // ç±»å‹æ˜¯docç±»å‹
            docId: "docusaurus/é…ç½®", // ç‚¹å‡»è·³è½¬çš„æ–‡æ¡£è·¯å¾„
            position: "right", // å±…äºnavbarçš„å³ä¾§
            label: "ğŸ‘¨ğŸ»â€ğŸŒ¾ æ–‡æ¡£", // æ ‡é¢˜é¡¹
          },
          { to: "/blog", label: "ğŸ‘¨ğŸ»â€ğŸ“ åšå®¢", position: "right" },
          {
            to: "/life",
            label: "ğŸ‘¨ğŸ»â€ğŸ“ ç”Ÿæ´»",
            position: "right",
            items: [{ label: "èœå•", to: "/life" }], // é…ç½®ä¸‹æ‹‰èœå• to æ ‡è¯†è·³è½¬çš„é“¾æ¥
          },
          // {
          //   href: "https://github.com/facebook/docusaurus", // å¤–é“¾çš„å½¢å¼ ä¹Ÿå¯ä»¥ä¸åŠ http è·³è½¬çš„æ˜¯é¡¹ç›®å†…
          //   label: "GitHub",
          //   position: "right",
          // },
        ],
      },
      footer: {
        style: "dark",
        copyright: `Copyright Â© ${new Date().getFullYear()} My Project, Inc. Built with Docusaurus.`,
      },
      prism: {
        theme: lightCodeTheme,
        darkTheme: darkCodeTheme,
      },
    }),
};
```

ç»è¿‡ä»¥ä¸Šé…ç½®åï¼Œæ•ˆæœå¦‚ä¸‹ï¼š
![](./imgs/navbar-config.png)

## æ·»åŠ å…¨å±€æœç´¢

ç›®å‰çœ‹åªæœ‰è¿™ä¸ªæ”¯æŒçš„å¥½ä¸€ç‚¹ï¼Œä½†æ˜¯æœç´¢ä¸­æ–‡å¾—åŠ  npm åŒ…ï¼šnodejieba
[@cmfcmf/docusaurus-search-local](https://github.com/cmfcmf/docusaurus-search-local)

## éƒ¨ç½²é—®é¢˜

### å‘å¸ƒåˆ° Github page

#### æµç¨‹

1. å…ˆ github æ–°å»ºä¸€ä¸ªä»“åº“ å¦‚ï¼š`markdowns`
2. å°†é¡¹ç›®çš„ `docusaurus.config.js` é…ç½®ä¸­çš„ baseUrl ä¿®æ”¹ä¸º ä»“åº“å `/markdowns/`
3. å»ºç«‹è¿œç¨‹è¿æ¥ å¹¶æ¨é€

```bash
git remote add origin https://github.com/iu-peng/markd.git && git push -u origin "main"
```

4. ä»“åº“æ–°å»ºåˆ†æ”¯ `gh-pages`ï¼Œç„¶ååˆ° settings --> pages ä¸­ä¿®æ”¹åˆ†æ”¯ä¸º gh-pages
5. é¡¹ç›®æ–°å»ºå·¥ä½œæµ ï¼Œæ–°å»ºæ–‡ä»¶ `.github/workflows/deploy.yml`

```yml title=".github/workflows/deploy.yml"
name: Deploy to GitHub Pages

on:
  push:
    branches:
      - main
    # å¦‚æœä½ æƒ³è¦è¿›ä¸€æ­¥å®šä¹‰è§¦å‘æ¡ä»¶ã€è·¯å¾„ç­‰ï¼Œå¯ä»¥æŸ¥çœ‹æ–‡æ¡£
    # https://docs.github.com/en/actions/using-workflows/workflow-syntax-for-github-actions#on

jobs:
  deploy:
    name: Deploy to GitHub Pages
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      - uses: actions/setup-node@v3
        with:
          node-version: 18
          cache: yarn

      - name: Install dependencies
        run: yarn install --frozen-lockfile
      - name: Build website
        run: yarn clear && yarn build

      # éƒ¨ç½²åˆ° GitHub Pages çš„çƒ­é—¨é€‰æ‹©ï¼š
      # æ–‡æ¡£ï¼šhttps://github.com/peaceiris/actions-gh-pages#%EF%B8%8F-docusaurus
      - name: Deploy to GitHub Pages
        uses: peaceiris/actions-gh-pages@v3
        with:
          github_token: ${{ secrets.GITHUB_TOKEN }}
          # è¦å‘å¸ƒåˆ° `gh-pages` åˆ†æ”¯çš„æ„å»ºè¾“å‡ºï¼š
          publish_dir: ./build
          # ä¸‹é¢ä¸¤è¡Œä¼šå°†æ­¤æ¬¡éƒ¨ç½² commit çš„ä½œè€…è®¾ç½®ä¸ºå®˜æ–¹çš„
          # GH-Actions æœºå™¨äººï¼š
          # https://github.com/actions/checkout/issues/13#issuecomment-724415212
          # å¦‚æœä¸è®¾ç½®è¿™ä¸¤ä¸ªå­—æ®µï¼ŒGH actions æœºå™¨äººä¼šè¢«é»˜è®¤ä½¿ç”¨ã€‚
          # ä½ å¯ä»¥ç”¨è‡ªå·±çš„ç”¨æˆ·ä¿¡æ¯æ›¿æ¢å®ƒä»¬ã€‚
          user_name: github-actions[bot]
          user_email: 41898282+github-actions[bot]@users.noreply.github.com
```

æäº¤ä¹‹åï¼ŒGitHub å°±ä¼šè‡ªåŠ¨åœ¨ action ä¸­å¸®ä½ æ„å»ºï¼Œå®Œæˆä¹‹åï¼Œè®¿é—® url + baseUrl å°±èƒ½çœ‹åˆ°ç»“æœäº†

#### é—®é¢˜

```js title="docusaurus.config.js"
module.exports = {
  url: "https://iu-peng.github.io",
  baseUrl: "/markd/",
};
```

å…¶ä¸­ baseUrl æ˜¯ä½  github ä»“åº“çš„åå­—ï¼Œå¦‚æœä½ çš„ä»“åº“æ˜¯ `iu-peng.github.io`ï¼Œåˆ™ baseUrl å¿…é¡»æ˜¯ `/`ï¼Œå¦åˆ™ä¼šéƒ¨ç½²å¤±è´¥
